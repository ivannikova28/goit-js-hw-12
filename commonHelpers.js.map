{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL_BASE = 'https://pixabay.com/api/'\n\nconst API_KEY_PIXABAY = \"39287667-f1a1553e63cd5dc6035e5c951\";\n\nexport const apiService = {\n    url:URL_BASE,\n    params: {\n        key: API_KEY_PIXABAY,\n        q: \"\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        page: 1,\n        per_page: 15\n    },\n \n    getPhotos(query = this.params.q) {\n        this.params.q = query;\n\n        return axios.get(this.url, {\n            params: {\n                ...this.params,\n                page: this.params.page++\n            },\n\n        })\n    }\n}","export   function templateGallery(gallery){\n    return gallery.map(templateItemGallery).join(\"\")\n}\n\nfunction templateItemGallery(gallery_item){\n    const {\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads\n\n        \n    } = gallery_item\n\n\n    return (\n      `<div class=\"gallery__item\">\n        <a class=\"gallery__link\" href=\"${largeImageURL}\">\n          <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n        </a>\n        <div class=\"gallery__info\">\n          <p class=\"gallery__info-item\">\n            <b>Likes ${likes}</b>\n          </p>\n          <p class=\"gallery__info-item\">\n            <b>Views ${views}</b>\n          </p>\n          <p class=\"gallery__info-item\">\n            <b>Comments ${comments}</b>\n          </p>\n          <p class=\"gallery__info-item\">\n            <b>Downloads ${downloads}</b>\n          </p>\n        </div>\n      </div>`\n  \n    )\n    \n}\n\n// /**\n//  * \n//  * @param {HTMLDivElement} element \n//  */\nexport function renderGallery(element, html) {\n  element.insertAdjacentHTML(\"beforeend\", html)\n}\n\nexport function renderGalleryItem(element, html) {\n  element.insertAdjacentHTML(\"beforeend\", html)\n}\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport { apiService } from \"./js/pixabay-api\";\nimport { renderGallery, templateGallery } from \"./js/render-functions\";\n\n\nconst refs = {\n    gallery : document.querySelector('.gallery'),\n    form: document.querySelector('form'),\n    loadMoreBtn: document.querySelector('.load-more'),\n    searchButton: document.querySelector('#search-form button'),\n\n}\n\nconst app = {\n    totalImagesUploaded: 0,\n    classLists: {\n        visuallyHidden: \"visually-hidden\"\n    }\n}\n\nconsole.log(app)\nconsole.log(apiService)\n\naddClassList(refs.loadMoreBtn, app.classLists.visuallyHidden)\n\nrefs.form.addEventListener('submit',handlerSubmitForm)\n\nrefs.loadMoreBtn.addEventListener(\"click\", handleLoadMore)\n\nasync function handleLoadMore(event) {\n    refs.loadMoreBtn.textContent = \"Loading...\"\n\n    try {\n        const { data } = await apiService.getPhotos()\n\n\n        const {hits, totalHits} = data;\n\n        const galleryHTML = templateGallery(hits)\n        renderGallery(refs.gallery, galleryHTML);\n\n       \n        const {height: cardHeight} = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect()\n \n        window.scrollBy({\n            // top: cardHeight * 2,\n            top: cardHeight * 1.95,\n            behavior: \"smooth\",\n        })\n\n        const  lightbox = new SimpleLightbox('.gallery a', { /* options */ });\n        lightbox.refresh()\n\n        app.totalImagesUploaded += 15\n\n        if (app.totalImagesUploaded >= totalHits ) {\n            iziToast.warning({\n                message: \"we're sorry? but you've reached the end of search result\",\n                position: \"topRight\"\n            })\n            addClassList(refs.loadMoreBtn,  app.classLists.visuallyHidden)\n            return\n        }\n\n\n    } catch (error) {\n\n        iziToast.warning({\n            message: \"we're sorry? but you've reached the end of search result\",\n            position: \"topRight\"\n        })\n\n        console.log(\"ERROR\", error)\n        // addClassList(refs.loadMoreBtn,  app.classLists.visuallyHidden)\n    } finally {\n        refs.loadMoreBtn.textContent = \"Load more\"\n\n        console.log(app)\n        console.log(apiService)\n    } \n}\n\nasync function handlerSubmitForm (event){\n    event.preventDefault()\n\n    const {searchQuery} = refs.form.elements\n\n    const searchQueryValue = searchQuery.value.trim()\n\n    if(!searchQueryValue) {\n        iziToast.info({\n            message: `Pleace, enter data to search` ,\n            position: \"topRight\"\n        })\n        return\n    }\n\n    refs.searchButton.disabled = true;\n        \n    refs.loadMoreBtn.textContent = \"Loading....\"\n    removeClassList(refs.loadMoreBtn,  app.classLists.visuallyHidden)\n\n    refs.gallery.innerHTML = \"\";\n\n    app.totalImagesUploaded = 0\n\n    apiService.params.page = 1\n\n    try {\n        const { data } = await apiService.getPhotos(searchQueryValue)\n\n        const {hits, totalHits} = data;\n        console.log(hits)\n        console.log(totalHits)\n\n        if(!totalHits){\n            iziToast.error({\n                message: `Sorry, there are no images matching your search query. Please try again!`,\n                position: \"topRight\"\n                \n            })\n\n            refs.loadMoreBtn.textContent = \"Load more\"\n            addClassList(refs.loadMoreBtn,  app.classLists.visuallyHidden)\n\n            refs.searchButton.disabled = false;\n            return\n\n        }\n\n\n        iziToast.success({\n            message: `Hooray! We found ${totalHits} images.`,\n            position:\"topRight\"\n        })\n\n        const galleryHTML = templateGallery(hits)\n        renderGallery(refs.gallery, galleryHTML);\n\n        refs.searchButton.disabled = false;\n\n\n        app.totalImagesUploaded = 15;\n\n        const  lightbox = new SimpleLightbox('.gallery a', { /* options */ });\n        lightbox.refresh()\n\n        refs.loadMoreBtn.textContent = \"Load more\"\n\n        // addClassList(refs.loadMoreBtn,  app.classLists.visuallyHidden)\n\n        if (totalHits <= 15) {\n            addClassList(refs.loadMoreBtn,  app.classLists.visuallyHidden)\n            // refs.searchButton.disabled = true;\n\n        } else {\n            removeClassList(refs.loadMoreBtn,  app.classLists.visuallyHidden)\n\n            // refs.searchButton.disabled = false;\n        }\n\n\n    } catch (error) {\n        console.log(\"ERROR\", error)\n\n        iziToast.error({\n            message: `Sorry there was an error`,\n            position:\"topRight\"\n        })\n\n\n        refs.searchButton.disabled = false;\n\n        // refs.loadMoreBtn.classList.add( app.classLists.visuallyHidden)\n        addClassList(refs.loadMoreBtn,  app.classLists.visuallyHidden)\n    } \n    //  finally{\n    //     refs.searchButton.disabled = false;\n    //     addClassList(refs.loadMoreBtn, app.classLists.visuallyHidden\")\n    // }\n\n}\n\n\nfunction addClassList(element, className) {\n    element.classList.add(className)\n}\nfunction removeClassList(element, className) {\n    element.classList.remove(className)\n}\n"],"names":["URL_BASE","API_KEY_PIXABAY","apiService","query","axios","templateGallery","gallery","templateItemGallery","gallery_item","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","element","html","refs","app","addClassList","handlerSubmitForm","handleLoadMore","event","data","hits","totalHits","galleryHTML","cardHeight","SimpleLightbox","iziToast","error","searchQuery","searchQueryValue","removeClassList","className"],"mappings":"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"}